# Project snapshot for LLMs — jays-audio-tools

This document is written to give any large language model (LLM) a compact, high‑value summary of the repository so the model can help effectively. It contains: the application name and purpose, the stack, an annotated directory tree, important files/classes to inspect, how to run the project in development, and example prompts you can feed to an LLM.

---

## Application name

jays-audio-tools

## Purpose / High level overview

jays-audio-tools is a small Node.js application that provides a collection of browser‑side audio utilities and developer tooling for building client apps and injecting client dependencies into a public web build. The repository contains server-side utilities (ES modules), client templates/partials, static public assets, and build/run scripts.

The project can:
- Read a `client-deps.json` manifest and copy client dependency files into `./public`, injecting script/link tags into a generated `./public/index.html`.
- Copy Handlebars partials into `./public/partials` for client consumption.
- Serve or produce a client application built from templates in `client-templates` and `public`.

## Stack / tech

- Runtime: Node.js (ES modules; `"type": "module"` in `package.json`)
- Server tooling: small utilities under `classes/` (e.g. `express-server.mjs`, `client-dep-handler.mjs`)
- Templates: Handlebars/Handlebars-like templates (files under `client-templates/` and `client-partials/`)
- Client assets: `public/` contains the generated static site (HTML/CSS/JS)
- Development helpers: `nodemon` is used via an `npm` script to auto-reload while editing

## High-value entry points / important files

- `package.json` — project metadata and useful scripts (e.g. `dev` which runs `nodemon`).
- `index.mjs` — main entry point for the app (used by the `dev` script).
- `classes/client-dep-handler.mjs` — loads `client-deps.json`, copies dependency files into `public/`, injects `<script>`/`<link>` tags into the HTML, and contains `Refresh()` and `RefreshPartials()` methods to sync client deps and partials. Useful for understanding how the public build is produced.
- `classes/express-server.mjs` — lightweight server code (if present) that shows how static files are served.
- `client-templates/` — Handlebars templates used to generate or serve client-side HTML (e.g. `main-layout.hbs`).
- `client-partials/` — source partials used by templates; `RefreshPartials()` copies `./client-partials/*.hbs` into `./public/partials`.
- `client-css/` — CSS used by client templates.
- `public/` — generated/served static output. `public/index.html` is the output after dependency injection.
- `client-deps.json` — manifest listing client dependency files with `{ src, dest }` entries.

## Annotated directory tree (top-level)

The following tree is a short, representative view. Use it to locate files quickly.

- AI_README.md (this file)
- build.mjs (builds the directory structure using ./treeMap.json and copies the client dependencies into the directory and generates html file for serving static with express)
- index.mjs (main entry point to the application)
- package.json
- README.md
- treeMap.json (defines the filesystem structure to be served static. parsed by ./classes/filesystem-handler.mjs)
- classes/ (client and server class modules)
	- audio-tool-server.mjs
	- client-dep-handler.mjs
	- client-app-templates.mjs
	- client-app.mjs
	- client-dep-handler.mjs
	- client-plugin.mjs
	- express-server.mjs
	- filesystem-handler.mjs
	- log-handler.mjs
	- tone-monitor.mjs
- client-css/ (client css files)
	- index.css
- client-partials (source directory for client ui handlbar templates, copied into static ./public/partials directory at the time of build)
    - main-layout.hbs
- logs/ (./classes/log-handler.mjs writes logs to this folder)
- public/ (generated file structure from ./classes/filesystem-handler.mjs, this directory is served static by express)
	- index.html (generated by ./classes/client-dep-handler.mjs)
	- classes/
		- client-app.mjs (copied from client-deps.json src property to dest property by ./classes/client-dep-handler.mjs)
	- css/
		- index.css (copied from client-deps.json src property to dest property by ./classes/client-dep-handler.mjs)
	- js/
		- jquery.min.js(copied from client-deps.json src property to dest property by ./classes/client-dep-handler.mjs)
	- partials (./classes/client-dep-handler.mjs  copies all .hbs files from ./client-partials to this directory )
        - main-layout.hbs 
Note: The tree above is a snapshot; there may be additional files and folders. Use `ls` or `git status` to see live changes.

## How files fit together (quick mapping)

- The `client-dep-handler` reads `client-deps.json` and copies files listed by `src` into the expected `dest` under `./public`, then writes `./public/index.html` containing injected `<script>` and `<link>` tags. This is the primary build step for client dependencies.
- The `RefreshPartials()` method copies `.hbs` partial templates from `./client-partials` into `./public/partials` so client templates can be used in the browser.
- `client-templates/` holds page templates (Handebars) used to render UI shells like the two-column layout or tone monitor UI.

## Development / run instructions

Typical commands (from repository root):

1. Install dev deps (already done if you ran it):

```bash
npm install
```

2. Start development auto-reload (nodemon):

```bash
npm run dev
```

The `dev` script is configured to run `nodemon` and watch specific folders/files (for example `classes`, `client-templates`, `client-deps.json`, `index.html`, and `treeMap.json`) and restart `index.mjs` when changes are detected.

## Quick tips for an LLM that is helping with this repo

When an LLM is asked to help with this project, it should:

1. Ask for the specific goal: Are you debugging, adding a feature, optimizing build time, or refactoring for types?
2. Identify the relevant area: editing templates (`client-templates/`), changing dependency injection logic (`classes/client-dep-handler.mjs`), or modifying server behavior (`classes/express-server.mjs`).
3. When suggesting edits, reference file paths and line numbers. Prefer small, focused diffs and include tests or verification steps.
4. For build/run suggestions, include exact commands and their expected outputs or follow-ups (e.g., which file to inspect if the server fails to start).

## Example LLM prompts to get high-quality help

- "Help me add a new template page that uses the existing `main-layout.hbs` and includes a settings pane in the menu drawer. Show only the necessary template and the minimal server changes to serve it."
- "Why does `client-dep-handler.mjs` not copy CSS files to `public/css`? Show a fix and a unit test (or manual test steps)."
- "Refactor `client-dep-handler.mjs` to be more testable: separate file IO from HTML injection and add a small test for the injection logic." 
- "Add TypeScript types to the project incrementally, starting with `client-dep-handler.mjs`. Provide a `tsconfig.json` and migration plan." 

## Known developer hooks and helper methods

- `classes/client-dep-handler.mjs` methods:
	- `Refresh()` — copies files from `client-deps.json` and injects tags into `./public/index.html`.
	- `RefreshPartials()` — copies `.hbs` partials from `./partials` to `./public/partials`.

- Template slots to inject content:
	- `client-templates/main-layout.hbs` — uses `{{title}}`, `{{#menuContent}}...{{/menuContent}}`, and `{{#mainContent}}...{{/mainContent}}` to place content.

## What to provide to an LLM for best results

When asking an LLM to modify or debug this repo, give:
- The exact file path(s) to change.
- A short description of the desired behavior and an example input → expected output.
- Any runtime commands you already tried and their full terminal output (if errors occurred).

Example minimal context bundle to paste into an LLM prompt:

1) "Repo root: jays-audio-tools; Node.js ES modules; `index.mjs` is entry. I want to add a button to the menu drawer in `client-templates/main-layout.hbs` that toggles a new settings panel. Files to change: `client-templates/main-layout.hbs`, `client-css/index.css`. Run `npm run dev` to test."

---

If you want, I can now:
- (A) open any of the files mentioned and produce a proposed patch, or
- (B) run a quick local verification step (read `public/index.html`) to show current injected tags, or
- (C) expand this README with an ADR, API surface, or tests.

Choose one of the above or ask for a specific patch and I'll proceed.
